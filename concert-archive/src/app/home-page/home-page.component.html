<!-- Hero: uses the first concert title/date as a featured album header -->
<div class="home-hero">
  <div class="hero-inner">
    <div class="hero-meta">
      <div class="hero-sub">Concert & Singles Archive</div>
  <h1 class="hero-title">Ziad on <a href="http://vimeo.com/rahbaniziad" target="_blank" rel="noopener noreferrer">Vimeo</a></h1>
  <p class="hero-subtitle">Song lists for the concerts that Ziad Rahbani personally published on vimeo</p>
    </div>
    <div class="hero-cover" aria-hidden="true">
      <!-- decorative area, could be replaced with a real cover image later -->
      <div class="cover-placeholder">ðŸŽ¶</div>
    </div>
  </div>
  <!-- full-width cover image under the header -->
  <div class="hero-cover-full" role="img" aria-label="Korg portrait">
    <!-- <img src="/assets/korg-portrait.png" alt="Korg portrait" /> -->
    <img src="/assets/song-list-portrait.png" alt="Song list" />
  </div>
</div>

<!-- Concert list: each concert as a card containing chapters and songs -->
<!-- Concerts presented as columns (one column per concert) -->
<div class="concert-table" role="table">
  <div class="concert-column" *ngFor="let c of concerts; let ci = index" role="column">
    <div class="concert-header">
      <div class="concert-title">{{ c.title }}</div>
      <div class="concert-date">{{ c.date }}</div>
      <div class="concert-desc" *ngIf="c.description">{{ c.description }}</div>
    </div>

    <div class="concert-body">
      <!-- Flatten chapters: show a single numbered list of songs per concert -->
      <mat-list>
  <mat-list-item *ngFor="let s of getAllSongs(c); let si = index" class="track-row">
          <div class="track-content">
            <div class="track-index">{{ si + 1 }}</div>
            <div class="song-info">
                <div class="song-main">
                  <button mat-button class="song-link" (click)="playSong(s)" [attr.title]="s.title" [class.song-new]="(s.category || '').toLowerCase() === 'new'">{{ shortTitle(s.title) }}</button>
                  <div class="song-duration">{{ s.duration }}</div>
                </div>
                <div class="song-desc" *ngIf="s.description">{{ s.description }}</div>
            </div>
          </div>
        </mat-list-item>
      </mat-list>
    </div>
  </div>
</div>


<!-- Audio-only dock (bottom-right desktop, bottom on mobile) -->
<div #playerDock class="player-dock" *ngIf="currentSong" [style.width.px]="currentWidth" [style.height.px]="currentHeight">
  <div class="dock-content">
    <!-- Subtle close button overlay (top-right) -->
    <button class="close-overlay" title="Close player" (click)="closeDock()" aria-label="Close player">
      <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.9 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.9a1 1 0 0 0 1.41-1.41L13.41 12l4.9-4.89a1 1 0 0 0 0-1.4z"/>
      </svg>
    </button>
    <!-- Resize handle (top-left). Drag to resize between min (1x) and max (3x). -->
    <div class="resize-handle top-left" (pointerdown)="onResizeStart($event)" title="Resize"></div>
    <div class="dock-left">
      <div class="dock-title">{{ shortTitle(currentSong?.title || '', 48) }}</div>
      <div class="dock-controls">
        <button mat-icon-button title="{{ dockPlaying ? 'Pause' : 'Play' }}" (click)="toggleDockPlay()" aria-label="Play/Pause">
          <img src="/assets/{{ dockPlaying ? 'pause.png' : 'play-button.png' }}" alt="{{ dockPlaying ? 'Pause' : 'Play' }}" />
        </button>
        <button mat-icon-button title="Open video" (click)="openVideoFromDock(); $event.stopPropagation()" aria-label="Open video">
          <img src="/assets/video-camera.png" alt="Open video" />
        </button>
        <button mat-icon-button title="Close" (click)="closeDock()" aria-label="Close dock">
          <img src="/assets/close.png" alt="Close" />
        </button>
      </div>
    </div>
    <div class="dock-video">
  <app-iframe-wrapper *ngIf="dockEmbedUrl" [src]="dockEmbedUrl"></app-iframe-wrapper>
      <div *ngIf="!dockEmbedUrl" style="width:160px;height:90px;background:#000;display:flex;align-items:center;justify-content:center;color:#fff;">No preview</div>
    </div>
  </div>
</div>
